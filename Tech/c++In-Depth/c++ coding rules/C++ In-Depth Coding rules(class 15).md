## C++ In-Depth Coding rules(class 15)

***

<br>

### :pushpin: 런타임 오류보다는 컴파일이나 링크 타임 오류가 낫다.

- 빌드 시에 해야 할 일을 런타임까지 미루지 말라.

- **컴파일러가 컴파일을 진행하면서 잘못된 부분을 찾을 수 있게 하는 것**이 런타임에 검사하도록 하는 것보다 좋은 방법이다.

  > **컴파일 검사는 컨트롤과 데이터에 의존하지 않기 때문에 비교적 완벽한 신뢰를 줄 수 있다.**

  > **런타임 검사는 컨트롤과 데이터에 의존적이기 때문에 완벽하게 대비하기 힘들다.**

<br>

### :pushpin: C++의 정적 검사 장점

> C++은 오류 검사를 컴파일 타임에 진행되도록 하여 보다 가속화할 수 있는 다양한 기회를 제공
>
> :point_right: C++의 가장 강력한 정적 검사 도구 중 하나는 타입 검사

- 정적인 검사는 데이터와 프로그램 흐름에 독립적이다.

  > [1] 정적 검사는 프로그램의 입력과 흐름에 관계가 없다 :point_right: 그만큼 검사가 수월하다.
  >
  > [2] 런타임 검사의 경우는 적절한 신뢰를 위해 다양한 입력 샘플과 환경에서 테스트해볼 필요가 있다.

- 정적으로 표현된 모델이 더 강력하다.

  > [1] 런타임 검사보다 컴파일 타임 검사에 더 의존하는 프로그램일수록 보다 나은 디자인을 반영하는 경우가 많다 :point_right: 프로그램이 만드는 모델이 C++의 타입 시스템에 의해 표현되기 때문으로 개발자가 보는 관점에서 컴파일러가 보기 때문
  >
  > [2] 런타임 검사도 때로 정적 방식으로 이루어지지만, 언어 내에서 정확히 표현되기 힘들다.

- 정적 검사는 런타임 오버헤드를 발생시키지 않는다.

  > [1] 동적인 검사를 정적인 검사로 대체하면 정확성을 해치지 않고서도 보다 빠른 실행 속도를 얻을 수 있다.

<br>

### :pushpin: 런타임 검사를 컴파일 타임 검사로 대체할 수 있는 예시

- 컴파일 타임 부울린 조건

  > ```c++
  > sizeof(int) >= 8
  > ```
  >
  > 위와 같은 컴파일 타임 부울린 조건을 검사할 때에는 런타임 테스트 대신 정적인 조건문을 사용하는 것이 좋다.

- 컴파일 타임 폴리머피즘(다형성)

  > 일반적인 함수나 타입을 정의할 때에는 런타임 다형성(가상 함수) 대신 컴파일 타임 다형성(템플릿)을 사용하는 것이 좋다.
  >
  > :point_right: 코드의 정적인 검사가 더 수월하기 때문

- 열거형

  > 상징적인 값들이나 제한된 범위의 값들을 표현할 때는 열거형을 사용하는 것이 좋다.

- 다운캐스팅

  > 다운캐스팅을 위해 dynamic_cast(또는 검사되지 않은 static_cast)를 자주 사용한다면 개발자의 기반 클래스가 제공하는 기능이 충분하지 못함을 의미하는 것
  >
  > :point_right: 인터페이스를 다시 디자인하여 개발자의 프로그램이 기반 클래스 중심으로 표현될 수 있게끔 하자