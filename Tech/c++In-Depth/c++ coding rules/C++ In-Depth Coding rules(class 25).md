## C++ In-Depth Coding rules(class 25)

***

<br>

### :pushpin: 내부 #include 가드를 사용하라, 외부 #include 가드를 써서는 안 된다.

- 모든 헤더 파일에 있어 고유한 #include 가드를 사용하여 의도치 않은 여러 포함 현상을 막아야 한다.
- 외부 include 가드는 사용하지 않는 것이 좋다.



<br>

### :pushpin: 각 헤더 파일은 내부 #include 가드를 통해 여러 번 포함되는 재정의를 막아야 한다.

- foo.h라는 헤더 파일이 다음과 같이 만들어졌을 때

  > ```c++
  > #ifndef FOO_H_INCLUDED_
  > #define FOO_H_INCLUDED_
  > // ... 파일의 내용
  > #endif
  > ```
  >
  > - #include 가드를 정의할 때 다음의 규칙을 염두에 두어야 한다.
  >   1. 고유한 가드 이름을 사용하라
  >      - 적어도 개발자의 애플리케이션 내에서는 고유한 이름을 사용해야 한다.
  >      - 애플리케이션 이름, 고유한 숫자를 포함한 가드 이름을 생성하는 도구를 통해 만들어진 이름을 결합해서 사용하는 것이 일반적인 방법
  >   2. 너무 앞서갈 필요는 없다
  >      - 가드 부분의 앞이나 뒤에 코드나 주석을 넣지 않는 것이 좋다.
  >      - 근래 사용되는 선처리기는 include 가드를 인식하기는 좋지만, 헤더의 정확한 앞이나 뒤에 가드가 등장할 것이라고 생각하기 때문 :point_right: 일반적인 형식이 아닐 경우 오류 가능

<br>

### :pushpin: 외부 include 가드는 사용하지 않는 것이 좋다.

```c++
#ifndef FOO_H_INCLUDED_ // 권장되지 않는 방법
#include "foo.h"
#define FOO_H_INCLUDED_
#endif
```

- 외부 include 가드는 근래에 사용되는 컴파일러에 맞지 않는다.
- 호출자와 헤더가 가드 이름에 대한 동의를 해야 한다는 제한 때문에 서로 간의 독립성을 해치는 요소가 된다.

<br>

### :pushpin: 예외 상황

- 헤더가 여러 번 포함되어야 하는 경우가 있을 수 있으며, 이 때에는 여기서 설명한 내용이 적용되지 않는다.

<br>

### :pushpin: 헤더의 중복 포함 발생 예시

1. 필요한 기능을 수행하기 위해 헤더 A, B를 포함했지만, 헤더 B에 헤더 A가 이미 포함되어 있는 경우
2. 필요한 기능을 수행하기 위해 헤더 A, B를 포함했으며, 헤더 A, B에 헤더 C를 포함할 경우
3. 필요한 기능을 수행하기 위해 헤더 A, B를 포함했으나, 앞으로 포함될 헤더 C에도 헤더 A 또는 B, 혹은 둘다 포함되어 있을 경우