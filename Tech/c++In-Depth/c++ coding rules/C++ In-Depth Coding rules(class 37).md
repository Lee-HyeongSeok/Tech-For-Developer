## C++ In-Depth Coding rules(class 37)

***

<br>

### :pushpin: 추상 인터페이스를 활용하라

추상 인터페이스는 구현 방식이나 상태 관리의 세부 사항을 신경쓰지 않고서도 많은 것을 얻을 수 있게 해준다.

:point_right: 디자인에 있어서 추상 인터페이스를 활용한 계층 구조를 애용하도록 하자.

<br>

### :pushpin: 추상 인터페이스를 정의하고, 거기서부터 상속받도록 하자

추상 인터페이스는 순수하게 가상 함수로만 이루어진, 멤버 데이터가 없는 클래스이다. 그리고 멤버 함수 구현체도 없는 것이 보통이다. 추상 인터페이스에 상태가 없다는 측면은 결국 전체 계층 구조 디자인을 간결하게 만들어 준다.

아래는 종속성 반전(Dependency Inversion)의 법칙이다.

- 고수준의 모듈은 저수준 모듈에 의존해서는 안 된다. 양쪽 모두 추상체에 의존하는 것이 바람직하다.
- 추상체는 세부 사항에 의존하지 않아야 하며, 반대로 세부 사항들이 추상체에 의존해야 한다.
  - A가 B에 의존한다는 의미는 B의 변화에 따라 A가 영향을 받는다는 뜻

:point_right: 계층 구조의 뿌리가 추상 클래스로부터 뻗어나가야 한다는 것이다.

<br>



### :pushpin: 종속성 반전의 법칙을 따를 때 이점

1. 구조상의 튼튼함
   - 시스템보다 불안정한 부분이 안정적인 부분에 의존하게 된다. 
   - 튼튼한 디자인은 변화가 지역적인 효과를 가지는 것과 깊은 관련이 있으며, 불안정한 시스템에서는 작은 변화가 어떻게 퍼져나가게 될지 쉽게 예측할 수 없다.
2. 뛰어난 유연성
   - 추상 인터페이스를 기반으로 하는 디자인은 보다 유연한 형태를 가지는 것이 일반적이다.
   - 추상체가 적절하게 모델링되면 새로운 필요조건을 가진 새로운 구현체를 만드는 것이 보다 쉽지만, 반대로 구현체에 의존하는 디자인은 새로운 필요조건의 등장이 핵심부의 변경을 유도하게 된다.
3. 모듈성의 강화
   - 추상체에 의존하는 디자인은 의존성이 간결하다는 점에서 모듈성이 강화된다는 특징이 있다.
   - 자주 변경되는 부분이 안정적인 부분에 의존하고, 그 반대의 의존은 이루어지지 않기 때문이다.
   - 분명한 의존 성향이 정해져 있으므로 다른 시스템과의 융합이나 관리가 수월하다.

<br>



### :pushpin: 추상 인터페이스가 아닌 클래스로부터 다중 상속은 피하라

- 다중 상속을 사용하는 디자인은 많은 대가를 필요로 하며 올바르게 사용하기 힘들다.
- 특히 상태 관리 측면이 가장 힘든 부분 중 하나이다.